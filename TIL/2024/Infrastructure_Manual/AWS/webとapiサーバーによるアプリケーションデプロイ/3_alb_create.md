# ALB の作成

## client 用の ALB

- 基本的な設定
  - ロードバランサータイプ
    - Application
  - ロードバランサー名
    - brain-breeze-prod-client-alb
  - スキーム
    - インターネット向け
  - ロードバランサーの IP アドレスタイプ
    - IPv4
- ネットワークマッピング
  - VPC
    - 1 で作成した VPC を選択
  - アベイラビリティーゾーンを選択
    - ap-northeast-1a
    - ap-northeast-1c
- セキュリティグループ
  - todo-prod-client-alb-sg のセキュリティグループを選択
- リスナーとルーティング
  - リスナ-
    - プロトコル
      - HTTP
    - ポート
      - 80
    - todo-prod-client-tg のターゲットグループを選択
      - 選択する tg がなければ「ターゲットグループの作成」を参考に作成
- WAF などは未設定

## server 用の ALB

- 基本的な設定
  - ロードバランサータイプ
    - Application
  - ロードバランサー名
    - brain-breeze-prod-server-alb
  - スキーム
    - 内部
  - ロードバランサーの IP アドレスタイプ
    - IPv4
- ネットワークマッピング
  - VPC
    - 1 で作成した VPC を選択
  - アベイラビリティーゾーンを選択
    - ap-northeast-1a
    - ap-northeast-1c
- セキュリティグループ
  - todo-prod-server-alb-sg のセキュリティグループを選択
- リスナーとルーティング
  - リスナ-
    - プロトコル
      - HTTP
    - ポート
      - 80
    - todo-prod-server-tg のターゲットグループを選択
      - 選択する tg がなければ「ターゲットグループの作成」を参考に作成
- WAF などは未設定

# ターゲットグループの作成

## client 用の TG

- 基本的な設定
  - ターゲットタイプの選択
    - IP アドレス
  - ターゲットグループ名
    - todo-prod-client-tg
  - プロトコル: ポート
    - HTTP: 3001
  - IP アドレスタイプ
    - IPv4
  - VPC
    - 1 で作成した VPC を選択
  - プロトコルバージョン
    - HTTP1
- ヘルスチェック
  - HTTP
  - ヘルスチェックパス
    - /を指定
    - ここはアプリによって変わる場合がある
  - ヘルスチェックの詳細はデフォルトのまま
- ターゲットの登録
  - この段階では行わない

## server 用の TG

- 基本的な設定
  - ターゲットタイプの選択
    - IP アドレス
  - ターゲットグループ名
    - todo-prod-server-tg
  - プロトコル: ポート
    - HTTP: 3000
  - IP アドレスタイプ
    - IPv4
  - VPC
    - 1 で作成した VPC を選択
  - プロトコルバージョン
    - HTTP1
- ヘルスチェック
  - HTTP
  - ヘルスチェックパス
    - /を指定
    - ここはアプリによって変わる場合がある
  - ヘルスチェックの詳細はデフォルトのまま
- ターゲットの登録
  - この段階では行わない
