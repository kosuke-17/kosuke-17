# 1 EC2 の作成

- 事前に VPC 内にパブリックサブネットとプライベートサブネットを作成しておく

## 1.1 東京リージョンに EC2 インスタンス を作成

### 1.1.1 インスタンスを作成

- 名前
  - `lemp-prod-ec2`
- AMI
  - linux
  - `Amazon Linux 2023 AMI`
  - `64ビット(x86)`
    - 64 ビット(arm)を選択した場合、インスタンスタイプの選択では tg4 や m6g などの ARM プロセットのインスタンスファミリーしか選べない
- インスタンスタイプ
  - `t2.micro(無料枠)`

### 1.1.2 キーペアの作成

- キーペア名
  - `lemp-prod`
- プライベートキーファイル

  - `.pem`

- 作成したキーペアを EC2 作成中の画面で選択

### 1.1.3 ネットワーク設定(インスタンスを作成の続き)

- `今回のために作成したVPCを選択`
- `同様のVPCのプライベートサブネットを選択`
- パブリック IP の自動割り当て
  - `有効`

### 1.1.4 セキュリティグループの作成

- 既存の SG を選択する場合は選択
  - HTTPS が通るようにインバウンドルールが追加されていること
- 新規の SG の場合
  - SG 名
    - `lemp-prod-web-sg`
  - 説明
    - SSH and HTTP/HTTPS enable
  - HTTP/HTTPS が通るようにインバウンドルールに HTTP(80)/HTTPS(443)のルールを追加する
    - 特定の IP だけ通れるようにする必要があれば、IP を調べてソースに記述
- ストレージの追加

  - デフォルトのまま

- インスタンスを起動をクリックして作成完了

- 作成後の確認
  - パブリック IPv4 DNS
  - パブリック IPv4 アドレス
  - 上記はインターネットからの接続可能な DNS 名と IP アドレスなので控えておく
  - EC2 インスタンスを再起動するとこの DNS と IP アドレスは変わるので注意が必要
